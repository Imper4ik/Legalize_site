{# templates/clients/partials/modals.html #}
{% load i18n %}

<div class="modal fade" id="addPaymentModal" tabindex="-1" aria-labelledby="addPaymentModalLabel" aria-hidden="true"
  data-price-url-template="{% url 'clients:get_price_for_service' '__service__' %}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addPaymentModalLabel">{% translate "Р”РѕР±Р°РІРёС‚СЊ РЅРѕРІС‹Р№ СЃС‡С‘С‚" %}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="{% translate 'Р—Р°РєСЂС‹С‚СЊ' %}"></button>
      </div>
      <form action="{% url 'clients:add_payment' client.id %}" method="post">
        {% csrf_token %}
        <div class="modal-body">
          <div class="mb-3">
            <label for="id_service_description" class="form-label">{% translate "РЈСЃР»СѓРіР°" %}</label>
            <select name="service_description" class="form-select" id="id_service_description" required>
              {% for choice_value, choice_label in payment_form.service_description.field.choices %}
              <option value="{{ choice_value }}" {% if client.application_purpose == "work" and choice_value == "work_service" %}selected{% elif client.application_purpose == "study" and choice_value == "study_service" %}selected{% elif client.application_purpose == "family" and choice_value == "consultation" %}selected{% endif %}>
                {{ choice_label }}
              </option>
              {% endfor %}
            </select>
          </div>
          <div class="mb-3">
            <label for="id_total_amount" class="form-label">{% translate "РћР±С‰Р°СЏ СЃСѓРјРјР°" %}</label>
            <input type="number" step="0.01" name="total_amount" class="form-control" id="id_total_amount" required>
          </div>
          <div class="mb-3">
            <label for="id_amount_paid" class="form-label">{% translate "РћРїР»Р°С‡РµРЅРѕ" %}</label>
            <input type="number" step="0.01" name="amount_paid" class="form-control" id="id_amount_paid" required>
          </div>
          <div class="mb-3">
            <label for="id_due_date" class="form-label">{% translate "Р”Р°С‚Р° РѕРїР»Р°С‚С‹ (РµСЃР»Рё РµСЃС‚СЊ)" %}</label>
            <input type="date" name="due_date" class="form-control" id="id_due_date">
          </div>
          <div class="mb-3">
            <label for="id_payment_date" class="form-label">{% translate "Р”Р°С‚Р° С„Р°РєС‚РёС‡РµСЃРєРѕР№ РѕРїР»Р°С‚С‹" %}</label>
            <input type="date" name="payment_date" class="form-control" id="id_payment_date">
          </div>
          <div class="mb-3">
            <label for="id_payment_method" class="form-label">{% translate "РЎРїРѕСЃРѕР± РѕРїР»Р°С‚С‹" %}</label>
            <select name="payment_method" class="form-select" id="id_payment_method">
              <option value="">---------</option>
              {% for choice_value, choice_label in payment_form.payment_method.field.choices %}
              <option value="{{ choice_value }}">{{ choice_label }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="mb-3">
            <label for="id_transaction_id" class="form-label">{% translate "ID С‚СЂР°РЅР·Р°РєС†РёРё" %}</label>
            <input type="text" name="transaction_id" class="form-control" id="id_transaction_id">
          </div>
          <div class="mb-3">
            <label for="id_status" class="form-label">{% translate "РЎС‚Р°С‚СѓСЃ" %}</label>
            <select name="status" class="form-select" id="id_status" required>
              {% for choice_value, choice_label in payment_form.status.field.choices %}
              <option value="{{ choice_value }}">{{ choice_label }}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% translate "РћС‚РјРµРЅР°" %}</button>
          <button type="submit" class="btn btn-primary">{% translate "РЎРѕС…СЂР°РЅРёС‚СЊ СЃС‡С‘С‚" %}</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="editPaymentModal" tabindex="-1" aria-labelledby="editPaymentModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editPaymentModalLabel">{% translate "Р РµРґР°РєС‚РёСЂРѕРІР°С‚СЊ СЃС‡С‘С‚" %}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="{% translate 'Р—Р°РєСЂС‹С‚СЊ' %}"></button>
      </div>
      <form id="editPaymentForm" method="post">
        {% csrf_token %}
        <div class="modal-body">
          <div class="mb-3">
            <label for="edit_id_service_description" class="form-label">{% translate "РЈСЃР»СѓРіР°" %}</label>
            <select name="service_description" class="form-select" id="edit_id_service_description" required>
              {% for choice_value, choice_label in payment_form.service_description.field.choices %}
              <option value="{{ choice_value }}">{{ choice_label }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="mb-3">
            <label for="edit_id_total_amount" class="form-label">{% translate "РћР±С‰Р°СЏ СЃСѓРјРјР°" %}</label>
            <input type="number" step="0.01" name="total_amount" class="form-control" id="edit_id_total_amount"
              required>
          </div>
          <div class="mb-3">
            <label for="edit_id_amount_paid" class="form-label">{% translate "РћРїР»Р°С‡РµРЅРѕ" %}</label>
            <input type="number" step="0.01" name="amount_paid" class="form-control" id="edit_id_amount_paid" required>
          </div>
          <div class="mb-3">
            <label for="edit_id_due_date" class="form-label">{% translate "Р”Р°С‚Р° РѕРїР»Р°С‚С‹ (РµСЃР»Рё РµСЃС‚СЊ)" %}</label>
            <input type="date" name="due_date" class="form-control" id="edit_id_due_date">
          </div>
          <div class="mb-3">
            <label for="edit_id_status" class="form-label">{% translate "РЎС‚Р°С‚СѓСЃ" %}</label>
            <select name="status" class="form-select" id="edit_id_status" required>
              {% for choice_value, choice_label in payment_form.status.field.choices %}
              <option value="{{ choice_value }}">{{ choice_label }}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% translate "РћС‚РјРµРЅР°" %}</button>
          <button type="submit" class="btn btn-primary">{% translate "РЎРѕС…СЂР°РЅРёС‚СЊ РёР·РјРµРЅРµРЅРёСЏ" %}</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="uploadDocumentModal" tabindex="-1" aria-labelledby="uploadDocumentModalLabel"
  aria-hidden="true" data-action-template="{% url 'clients:add_document' client_id=client.id doc_type='__doc_type__' %}"
  data-confirm-url-template="{% url 'clients:confirm_wezwanie_parse' doc_id=0 %}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="uploadDocumentModalLabel">{% translate "Р”РѕР±Р°РІРёС‚СЊ РґРѕРєСѓРјРµРЅС‚" %}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="{% translate 'Р—Р°РєСЂС‹С‚СЊ' %}"></button>
      </div>
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="parse_wezwanie" id="uploadDocumentParseWezwanie" value="0">
        <div class="modal-body">
          <p class="mb-3 text-muted" id="uploadDocumentDescription"></p>
          <div class="mb-3">
            <label for="{{ document_upload_form.file.id_for_label }}" class="form-label">{% translate "Р’С‹Р±РµСЂРёС‚Рµ С„Р°Р№Р»"
              %}</label>
            {{ document_upload_form.file }}
          </div>
          <div class="mb-3">
            <label for="{{ document_upload_form.expiry_date.id_for_label }}" class="form-label">{% translate
              "Р”РµР№СЃС‚РІРёС‚РµР»РµРЅ РґРѕ (РЅРµРѕР±СЏР·Р°С‚РµР»СЊРЅРѕ)" %}</label>
            {{ document_upload_form.expiry_date }}
          </div>
          <div class="border rounded p-3 d-none" id="wezwanieConfirmationStep">
            <h6 class="mb-2">{% translate "РџРѕРґС‚РІРµСЂР¶РґРµРЅРёРµ РґР°РЅРЅС‹С… wezwanie" %}</h6>
            <p class="text-muted mb-3 small">{% translate "РџСЂРѕРІРµСЂСЊС‚Рµ СЂР°СЃРїРѕР·РЅР°РЅРЅС‹Рµ РґР°РЅРЅС‹Рµ РїРµСЂРµРґ СЃРѕС…СЂР°РЅРµРЅРёРµРј. Р’СЃРµ РїРѕР»СЏ
              РґРѕСЃС‚СѓРїРЅС‹ РґР»СЏ СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёСЏ." %}</p>

            <div class="mb-2">
              <label class="form-label small mb-1">{% translate "РРјСЏ" %}</label>
              <input type="text" class="form-control form-control-sm" id="wezwanieParsedFirstName">
            </div>
            <div class="mb-2">
              <label class="form-label small mb-1">{% translate "Р¤Р°РјРёР»РёСЏ" %}</label>
              <input type="text" class="form-control form-control-sm" id="wezwanieParsedLastName">
            </div>
            <div class="mb-2">
              <label class="form-label small mb-1">{% translate "РќРѕРјРµСЂ РґРµР»Р°" %}</label>
              <input type="text" class="form-control form-control-sm" id="wezwanieParsedCaseNumber">
            </div>
            <div class="mb-2">
              <label class="form-label small mb-1">{% translate "Р”Р°С‚Р° РѕС‚РїРµС‡Р°С‚РєРѕРІ" %}</label>
              <input type="date" class="form-control form-control-sm" id="wezwanieParsedFingerprintsDate">
            </div>
            <div class="mb-2">
              <label class="form-label small mb-1">{% translate "Р’СЂРµРјСЏ РѕС‚РїРµС‡Р°С‚РєРѕРІ" %}</label>
              <input type="time" class="form-control form-control-sm" id="wezwanieParsedFingerprintsTime">
            </div>
            <div class="mb-2">
              <label class="form-label small mb-1">{% translate "РњРµСЃС‚Рѕ РѕС‚РїРµС‡Р°С‚РєРѕРІ" %}</label>
              <input type="text" class="form-control form-control-sm" id="wezwanieParsedFingerprintsLocation">
            </div>
            <div class="mb-2">
              <label class="form-label small mb-1">{% translate "Р”Р°С‚Р° РґРµС†РёР·РёРё" %}</label>
              <input type="date" class="form-control form-control-sm" id="wezwanieParsedDecisionDate">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <div class="d-flex gap-2 w-100 justify-content-end" id="uploadDocumentActions">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% translate "РћС‚РјРµРЅР°" %}</button>
            <button type="submit" class="btn btn-primary" id="uploadDocumentSubmitButton">{% translate "РЎРѕС…СЂР°РЅРёС‚СЊ"
              %}</button>
            <button type="submit" class="btn btn-primary d-none" id="wezwanieParseButton">{% translate "Р Р°СЃРїРѕР·РЅР°С‚СЊ
              wezwanie" %}</button>
          </div>
          <div class="d-flex gap-2 w-100 justify-content-end d-none" id="wezwanieConfirmActions">
            <button type="button" class="btn btn-outline-secondary" id="wezwanieCancelButton" data-bs-dismiss="modal">{%
              translate "РћС‚РјРµРЅР°" %}</button>
            <button type="button" class="btn btn-primary" id="wezwanieConfirmButton">{% translate "РџРѕРґС‚РІРµСЂРґРёС‚СЊ"
              %}</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>