{# legalize_site/legalize_site/clients/templates/clients/partials/payment_item.html #}

<div class="d-flex justify-content-between">
    <div>
        <span>{{ payment.get_service_description_display }}</span>
        <button type="button" class="btn btn-link btn-sm p-0 ms-2 edit-payment-btn"
                data-bs-toggle="modal" data-bs-target="#editPaymentModal"
                data-url="{% url 'clients:edit_payment' payment.id %}"
                data-service="{{ payment.service_description }}"
                data-total_amount="{{ payment.total_amount|stringformat:'.2f' }}"
                data-amount_paid="{{ payment.amount_paid|stringformat:'.2f' }}"
                data-status="{{ payment.status }}">
            <i class="bi bi-pencil-square"></i>
        </button>
        <form action="{% url 'clients:delete_payment' payment.id %}" method="post" class="d-inline delete-payment-form">
            {% csrf_token %}
            <button type="submit" class="btn btn-link btn-sm p-0 text-danger" title="Удалить платёж">
                <i class="bi bi-trash"></i>
            </button>
        </form>
    </div>
    <span class="badge {% if payment.status == 'paid' %}bg-success{% elif payment.status == 'partial' %}bg-warning{% else %}bg-danger{% endif %}">
        {{ payment.get_status_display }}
    </span>
</div>
<div class="progress mt-1" style="height: 20px;">
    <div class="progress-bar" role="progressbar" style="width: {% widthratio payment.amount_paid payment.total_amount 100 %}%;" aria-valuenow="{{ payment.amount_paid }}" aria-valuemin="0" aria-valuemax="{{ payment.total_amount }}"></div>
</div>
<div class="d-flex justify-content-between mt-1">
    <small>Оплачено: {{ payment.amount_paid }} zł</small>
    <small>Всего: {{ payment.total_amount }} zł</small>
</div>