{% extends "base.html" %}

{% block title %}Завершение регистрации{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card shadow-sm">
      <div class="card-header">
        <h4 class="mb-0">Завершение регистрации</h4>
      </div>
      <div class="card-body">

        {% if form.errors.email %}
          <div class="alert alert-warning">
            <p><strong>Аккаунт с email <span class="fw-bold">{{ sociallogin.account.user.email }}</span> уже существует.</strong></p>
            <p class="mb-0">Пожалуйста, <a href="{% url 'login' %}">войдите в свой обычный аккаунт</a>, а затем в настройках профиля вы сможете привязать вход через Google.</p>
          </div>
        {% else %}
          <p>Вы вошли через аккаунт Google (<strong>{{ sociallogin.account.user.email }}</strong>).</p>
          <p>Пожалуйста, подтвердите данные, чтобы завершить создание вашего аккаунта.</p>
          <hr>
          <form class="signup" id="signup_form" method="post" action="{% url 'socialaccount_signup' %}">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary mt-3 w-100">Завершить регистрацию</button>
          </form>
        {% endif %}

      </div>
    </div>
  </div>
</div>
{% endblock %}