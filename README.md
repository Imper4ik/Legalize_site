# Legalize Site

Этот репозиторий содержит код портала Legalize на Django. Проект уже подготовлен к развертыванию на Render, поэтому для запуска в облаке осталось выполнить несколько шагов конфигурации.

## Что дальше: запуск на Render
1. **Подключите репозиторий.** Войдите в Render, нажмите **New → Web Service** и выберите этот репозиторий. Render автоматически прочитает файл `render.yaml`, подставит команду сборки `./build.sh`, запуск `gunicorn legalize_site.wsgi:application` и добавит `PYTHONPATH=/opt/render/project/src`, чтобы Gunicorn видел Django-проект.
2. **Создайте базу данных (опционально).** Если вам нужна PostgreSQL, добавьте сервис базы данных в Render и подключите его к веб-сервису. Render создаст переменную окружения `DATABASE_URL`, которую проект использует автоматически. Без неё приложение будет работать на SQLite.
3. **Установите переменные окружения.** В разделе **Environment** добавьте:
   - `SECRET_KEY` — сгенерированный секретный ключ Django.
   - `DEBUG` — оставьте пустым либо `False` для продакшна.
   - `SENDGRID_API_KEY` — если планируете отправлять почту через SendGrid.
   Остальные значения (например `RENDER_EXTERNAL_HOSTNAME`) Render выставит самостоятельно.
4. **Настройте домен и HTTPS.** После первого деплоя Render выдаст адрес вида `https://<service>.onrender.com`. Благодаря изменениям в настройках этот домен автоматически попадает в `ALLOWED_HOSTS` и `CSRF_TRUSTED_ORIGINS`.
5. **Выполните миграции и создайте администратора.** Render запустит `python manage.py migrate` во время сборки. После деплоя откройте **Shell** сервиса и выполните `python manage.py createsuperuser`, чтобы получить доступ к админке.
6. **Проверьте статику.** Скрипт `build.sh` вызывает `collectstatic`, и `whitenoise` обслуживает файлы, поэтому дополнительных действий для статики не требуется.

## Локальный запуск
Для локальной разработки по-прежнему можно использовать SQLite. Убедитесь, что у вас установлены зависимости из `requirements.txt`, и выполните:

```bash
python manage.py migrate
python manage.py runserver
```

При необходимости задайте переменную `DEBUG=True`, чтобы включить отладочный режим.
